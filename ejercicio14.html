<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Cancelar Promesa</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="flex justify-center items-center min-h-screen bg-gray-100">
    <div class="bg-white p-6 rounded shadow text-center">
        <h1 class="font-bold text-xl">Cancelar Fetch</h1>
        <button class="bg-red-500 text-white px-4 py-2 rounded" id="cancelar">Cancelar</button>
        <p id="mensaje" class="mt-4 text-sm text-gray-800">Esperando respuesta...</p>
    </div>

    <script>
        const controller = new AbortController();
        const signal = controller.signal;
        
        fetch("https://jsonplaceholder.typicode.com/posts", { signal })
            .then(res => res.json())
            .then(() => mensaje.textContent = "Datos recibidos")
            .catch(err => mensaje.textContent = "PeticiÃ³n cancelada");
        
        document.getElementById("cancelar").addEventListener("click", () => {
            controller.abort();
        });
    
        const mensaje = document.getElementById("mensaje");
    </script>
</body>
</html>
